# ============================================
# ğŸ³ Docker ë°°í¬ ë¹ ë¥¸ ì°¸ì¡° ëª…ë ¹ì–´
# ============================================

# â–¶ í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™
cd C:\workspace\simple_side\doll_gacha

# ============================================
# ğŸ“¦ ìµœì´ˆ ë°°í¬
# ============================================

# 1. í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ìƒì„±
Copy-Item .env.example .env
notepad .env  # ì‹¤ì œ í‚¤ ê°’ ì…ë ¥

# 2. ë¹Œë“œ ë° ì‹¤í–‰ (í•œë²ˆì—)
docker-compose up -d --build

# 3. ìƒíƒœ í™•ì¸
docker-compose ps

# 4. ë¡œê·¸ í™•ì¸ (ì‹¤ì‹œê°„)
docker-compose logs -f

# 5. ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸
Start-Process "http://localhost:8080"

# ============================================
# ğŸ”„ ì½”ë“œ ìˆ˜ì • í›„ ì¬ë°°í¬
# ============================================

docker-compose up -d --build

# ============================================
# ğŸ›‘ ì„œë¹„ìŠ¤ ê´€ë¦¬
# ============================================

# ì¤‘ì§€ (ë°ì´í„° ìœ ì§€)
docker-compose stop

# ì¬ì‹œì‘
docker-compose start

# ì‚­ì œ (ë°ì´í„° ìœ ì§€)
docker-compose down

# ì™„ì „ ì‚­ì œ (DB ë°ì´í„° í¬í•¨)
docker-compose down -v

# ============================================
# ğŸ” ë””ë²„ê¹…
# ============================================

# ë¡œê·¸ ë³´ê¸°
docker-compose logs -f app    # ì•± ë¡œê·¸
docker-compose logs -f db     # DB ë¡œê·¸

# ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì ‘ì†
docker exec -it doll_gacha_app sh

# DB ì ‘ì†
docker exec -it doll_gacha_db mysql -u doll_gacha -p

# ============================================
# ğŸ§¹ ì •ë¦¬
# ============================================

# ë¯¸ì‚¬ìš© ë¦¬ì†ŒìŠ¤ ì •ë¦¬
docker system prune

# ëª¨ë“  ì´ë¯¸ì§€ ì‚­ì œ
docker image prune -a

