# 다음 개발 계획

## ✅ 완료된 기능들

| 기능 | 상태 | 설명 |
|------|------|------|
| JWT 인증 | ✅ 완료 | 로그인/로그아웃/회원가입 |
| OAuth2 소셜 로그인 | ✅ 완료 | 카카오/구글 |
| Access Token 자동 재발급 | ✅ 완료 | 웹(쿠키)/앱(헤더) 모두 지원 |
| 공통 API 응답 처리 | ✅ 완료 | `ApiResponse<T>` 형식 |
| 공통 에러 처리 | ✅ 완료 | `GlobalExceptionHandler`, `ErrorResponse` |
| 커뮤니티 CRUD | ✅ 완료 | 게시글 작성/수정/삭제/조회 |
| 댓글 CRUD | ✅ 완료 | 댓글 작성/수정/삭제 |
| 리뷰 CRUD | ✅ 완료 | 리뷰 작성/삭제/조회 |
| 파일 업로드 | ✅ 완료 | 이미지/첨부파일 업로드 |
| 매장 조회 | ✅ 완료 | 지도/목록/상세 |
| 통합 테스트 | ✅ 완료 | 58개 테스트 (100% 통과) |
| 헤더 동적 로그인 상태 | ✅ 완료 | JavaScript로 로그인 상태 업데이트 |

---

## 📋 다음 단계 (우선순위순)

### 1️⃣ Swagger (API 문서화) - 권장 ⭐
**난이도**: 쉬움 (30분)

**왜 필요한가?**
- API 문서가 자동으로 생성됨
- 브라우저에서 바로 API 테스트 가능
- 앱 개발 시 참고 자료로 활용
- 프론트엔드/앱 개발자와 협업 시 필수

**적용 후:**
- `http://localhost:8080/swagger-ui.html` 에서 모든 API 확인 가능

**적용 방법:**
```gradle
// build.gradle에 추가
implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.3.0'
```

---

### 2️⃣ 배포 (AWS/Docker)
**난이도**: 보통 (1~2일)

**왜 필요한가?**
- 실제 서비스 환경에서 테스트
- 도메인 연결 및 HTTPS 적용
- 다른 사람들이 접속해서 테스트 가능

**배포 옵션:**

| 옵션 | 비용 | 난이도 | 설명 |
|------|------|--------|------|
| AWS EC2 (프리티어) | 무료 (1년) | ⭐⭐ | 가장 일반적 |
| AWS Elastic Beanstalk | 무료~유료 | ⭐ | 쉬운 배포 |
| Docker + Docker Compose | - | ⭐⭐ | 로컬/서버 동일 환경 |
| Railway/Render | 무료~유료 | ⭐ | 가장 쉬움 |

**필요 작업:**
- [ ] Dockerfile 작성
- [ ] application-prod.yml (운영 환경 설정)
- [ ] HTTPS 적용 (Let's Encrypt)
- [ ] 도메인 연결
- [ ] DB 분리 (RDS 또는 외부 MariaDB)

---

### 3️⃣ Redis (세션/토큰 저장소)
**난이도**: 보통 (2~3시간)

**현재 상태:**
- Refresh Token을 MariaDB에 저장 중
- 동작에는 문제없음

**Redis 적용 시 장점:**
- 토큰 조회/저장 속도 향상 (메모리 기반)
- TTL(만료시간) 자동 관리
- 서버 재시작해도 세션 유지 (클러스터 환경)

**적용 방법:**
```gradle
// build.gradle에 추가
implementation 'org.springframework.boot:spring-boot-starter-data-redis'
```

**우선순위가 낮은 이유:**
- 현재 MariaDB로도 잘 동작함
- 사용자가 많아지면 그때 적용해도 됨

---

### 4️⃣ 로깅/모니터링
**난이도**: 쉬움 (1~2시간)

**왜 필요한가?**
- 운영 시 에러 추적
- 사용자 행동 분석
- 성능 병목 파악

**도구 옵션:**
- **Logback**: Spring 기본 로깅 (파일 저장)
- **Sentry**: 에러 추적 서비스 (무료 플랜 있음)
- **Actuator**: Spring Boot 모니터링

---

### 5️⃣ 캐싱
**난이도**: 보통 (2~3시간)

**적용 대상:**
- 자주 조회되는 데이터 (매장 목록, 리뷰 통계 등)
- 변경이 적은 데이터

**도구:**
- Spring Cache + Redis
- 또는 Caffeine (로컬 캐시)

---

## 🗓️ 권장 순서

```
1. Swagger 적용 (30분)
   ↓
2. 배포 준비 (Dockerfile, 환경설정)
   ↓
3. AWS EC2 또는 Railway 배포
   ↓
4. HTTPS + 도메인 연결
   ↓
5. (선택) Redis 적용
   ↓
6. (선택) 로깅/모니터링 설정
```

---

## 📱 앱 개발 관련

현재 웹에서 구현된 토큰 재발급 로직은 앱에서도 동일하게 적용 가능:

| 구분 | 웹 (브라우저) | 앱 (Flutter 등) |
|------|-------------|-----------------|
| 토큰 저장 | HttpOnly 쿠키 (자동) | SecureStorage (수동) |
| 재발급 요청 | 쿠키 자동 전송 | `Authorization: Bearer {refresh_token}` 헤더 |
| 새 토큰 응답 | Set-Cookie로 자동 저장 | JSON으로 받아서 직접 저장 |

서버 `RefreshController`가 이미 둘 다 지원하도록 구현됨.

---

## 📝 메모

- 현재 access_token 만료시간: 30초 (테스트용)
- **운영 시 변경 필요**: `application.yml`에서 `expiration_access: 1800000` (30분)

